# 변경 기록 (Changelog)

### 핵심 목표
- 사용자의 시급을 기준으로 선택지 A/B의 **총비용(Total Cost Index)**을 계산·비교하고,
- 결과와 함께 **근거(시간비용/직접비용 분해 + 수식)**를 제공하여 의사결정의 확신을 높인다.

---

## 개요

이 문서는 **"시간 = 돈(기회비용 계산)" 프로젝트**의 주요 개선·추가 내역을 시간순으로 정리합니다.

### 목적
1. **개선 과정 기록**: **개선 과정·우선순위 변경·막힌 지점 해결** 과정을 명시적으로 기록하여 프로젝트 진행 과정을 투명하게 공유.
2. **맥락 관리**: Git 커밋 메시지만으로는 드러나지 않는 **"왜 이 결정을 했는지"**, **"무엇을 시도했다가 바꿨는지"**를 문서화.
3. **AI 활용 회고**: AI 요청 → 검증 → 수정 플로우를 함께 남겨 **협업 방식**을 투명하게 공개.

---

### 이 문서의 구성
- **날짜 + 버전**: 시간 흐름에 따른 진행 상황 추적.
- **변경 요약**: 1~2문장으로 해당 버전의 핵심 내용.
- **변경 이유**: 왜 이 시점에 이 기능/개선을 했는지.
- **영향**: 해당 변경이 프로젝트·기능·구조에 미친 영향.
- **증빙**: Git 커밋 해시 참조.

---

## 변경 기록

> **커밋 메시지 운영 원칙**
>
> - 커밋 메시지는 **간략하고 포괄적인 한 줄 요약** 위주로 작성합니다.  
>   - 예) `feat: add multi comparison API`, `chore: refine error handling`  
> - 대신, **구체적인 변경 내역/이유/영향**은 아래 표와 `RETROSPECTIVE.md`, `AI_LOG.md`에 상세히 기록하여  
>   - 독자가 "개선 과정"과 "의사결정 이유"를 한눈에 볼 수 있도록 합니다.

---

### Phase 1: 초기 설정 및 MVP 구현

| 버전 | 날짜 | 변경 요약 | 변경 이유 | 영향 | 커밋 |
|------|------|----------|----------|------|------|
| v0.1 | 2026-02-12 | 프로젝트 초기 설정 | Maven + Spring Boot 기반 프로젝트 구조 생성, 의존성 설정 | 개발 환경 확립 | 3f8bb99 |
| v0.2 | 2026-02-12 | 문제 정의 및 설계 문서화 | 과제 요구사항에 맞는 문제 정의/기능 범위/엣지 케이스를 명확히 정의 | README 초안 작성, 이후 구현의 기준 | 4c22dfd |
| v0.3 | 2026-02-12 | 기본 계산 모델 구현 | DTO, Service, Controller 레이어 분리 및 핵심 계산 로직 (TC = C + W/60 × T) 구현 | 2안 비교 API 동작, 단위 테스트 통과 | 초기 커밋 |
| v0.4 | 2026-02-12 | 기본 UI 및 Thymeleaf 템플릿 | 시급/선택지 A/B 입력 폼, 결과 표시 화면 구현 | 웹 브라우저에서 직접 사용 가능 | 초기 커밋 |
| v0.5 | 2026-02-12 | 계산식 토글, 프리셋 예시 추가 | 사용자가 계산 근거를 확인하고, 빠르게 예시를 테스트할 수 있도록 UX 개선 | 온보딩 경험 향상, 첫 사용 시 학습 곡선 감소 | 초기 커밋 |

---

### Phase 2: 안정성 및 품질 강화

| 버전 | 날짜 | 변경 요약 | 변경 이유 | 영향 | 커밋 |
|------|------|----------|----------|------|------|
| v0.6 | 2026-02-12 | 입력 검증 및 전역 예외 처리 추가 | 잘못된 입력(null, 음수, 0)으로 인한 오류 방지 | @Valid, @NotNull, @Min 검증, GlobalExceptionHandler 도입 | 초기 커밋 |
| v0.7 | 2026-02-12 | 단위 테스트 11개 작성 | 계산 로직의 정확성을 자동으로 검증, 회귀 방지 | OpportunityCostServiceTest, OpportunityCostControllerTest | 초기 커밋 |
| v0.8 | 2026-02-12 | JSON 파싱 오류 처리 개선 | 잘못된 JSON 요청 시 500 에러 대신 명확한 400 Bad Request | HttpMessageNotReadableException 핸들러 추가 | d7d0128 |

---

### Phase 3: 확장 기능 구현

| 버전 | 날짜 | 변경 요약 | 변경 이유 | 영향 | 커밋 |
|------|------|----------|----------|------|------|
| v0.9 | 2026-02-12 | 다안 비교 기능 구현 (3~5개 선택지) | 실제 의사결정에서는 2개 이상의 선택지를 비교하는 경우가 많음 | 동적 UI, 선택지 추가/제거, 최소 비용 자동 선택 | 초기 커밋 |
| v1.0 | 2026-02-12 | 히스토리 저장 및 캐싱 구현 | 반복 계산 방지 및 과거 계산 재사용으로 사용자 편의성 향상 | localStorage 히스토리(최대 20개), CacheService(인메모리, TTL 1시간) | 초기 커밋 |
| v1.0.1 | 2026-02-12 | 배포 준비 문서화 | Docker, Heroku, Railway, AWS, GCP 등 다양한 플랫폼에 배포 가능하도록 준비 | DEPLOYMENT.md, Dockerfile, docker-compose.yml, Procfile | 초기 커밋 |

---

### Phase 4: 사용자 피드백 기반 UX 개선

| 버전 | 날짜 | 변경 요약 | 변경 이유 | 영향 | 커밋 |
|------|------|----------|----------|------|------|
| v1.1.0 | 2026-02-12 | 다안 비교 프리셋 동작 수정 | 실제 사용자 테스트에서 "다안 비교 모드에서 프리셋이 동작하지 않음" 발견 | data-index 속성으로 DOM 선택 안정화, A/B만 채워지던 문제 부분 해결 | 34bafde |
| v1.1.1 | 2026-02-12 | 에러 알림 시인성 개선 (1차) | 에러 메시지가 화면 하단에 있어 사용자가 놓칠 수 있음 | alert() + 자동 스크롤 추가 | 34bafde |
| v1.2.0 | 2026-02-12 | 다안 비교 프리셋 완전 지원 (3~5개 선택지) | A, B만 채워지고 C, D, E가 비어있던 문제 해결 | 프리셋 데이터 구조를 `options` 배열로 확장, 모든 선택지 자동 채움 | 8402c08 |
| v1.2.1 | 2026-02-12 | 에러 알림 방식 개선 (2차) | 사용자 피드백: alert()가 작동하지 않고 침습적 | alert() 제거, 하단 메시지 + 자동 스크롤만 유지 | 8402c08 |
| v1.3.0 | 2026-02-12 | 사용자 피드백 종합 반영 | 실제 사용자 테스트 결과 4건 반영 | ① 계산식 상세화 (각 선택지별 단계 표시), ② 제목/설명 개선, ③ 단위 변환 가이드 추가 | e183173 |
| v1.3.1 | 2026-02-12 | 히스토리 정책 변경 | 사용자 피드백: "서버 재시작 시 이전 기록이 남아 혼란" | localStorage → sessionStorage 변경, 탭 닫으면 자동 삭제 | 25662f7 |

---

### Phase 5: 문서화 및 완성도 강화

| 버전 | 날짜 | 변경 요약 | 변경 이유 | 영향 | 커밋 |
|------|------|----------|----------|------|------|
| v1.4.0 | 2026-02-12 | 테스트 커버리지 확장 (11개 → 17개) | 엣지 케이스 검증 강화 (매우 큰 값, 음수, 캐시 동작) | 신뢰성 향상, 회귀 방지 | 03be125 |
| v1.4.1 | 2026-02-12 | 우선순위 조정 및 의사결정 기록 강화 | 실제 개발 과정의 trade-off, 막힌 부분, 시간 배분 변화를 명확히 기록 | RETROSPECTIVE.md 대폭 강화 (실패 사례, 교훈 포함) | 03be125 |
| v1.5.0 | 2026-02-12 | 측정 가능한 성공 지표 추가 | 문제 정의의 구체성 향상 (정량적/정성적 지표, 목표 vs 실제 테이블) | README에 측정 가능한 지표 6개 추가 | 528e6f4 |
| v1.6.0 | 2026-02-12 | AI 활용 기록 심화 | 체계적 접근 방식, 사용자 참여의 가치, AI vs 인간 강점 분석 | AI_LOG.md 대폭 확장 (133줄 추가) | a56dd95 |
| v1.7.0 | 2026-02-12 | 아키텍처 문서 작성 | 코드 구조의 설계 의도, 확장성, ADR(의사결정 기록) 문서화 | ARCHITECTURE.md 신규 작성 (543줄, 15개 섹션) | 9e0edf8 |

---

### Phase 6: 면접 준비 (진정성 확보)

| 버전 | 날짜 | 변경 요약 | 변경 이유 | 영향 | 커밋 |
|------|------|----------|----------|------|------|
| v1.7.1~1.7.7 | 2026-02-12 | 평가 중심 언어 제거 | 면접에서 "점수를 위해 했다"는 인상을 주지 않기 위해 | README, RETROSPECTIVE, CHANGELOG, TROUBLESHOOTING, AI_LOG에서 "가산점", "평가 기준", "채점" 표현 제거 | 2da488f~e3da9ac |
| v1.8.0 | 2026-02-13 | 시급 상한선 검증 추가 | 매우 높은 시급 입력 시 "JSON 형식 오류" 메시지 발생 → 명확한 에러 메시지로 개선 | @Max(1억원) 추가, 프론트엔드 상한선 체크, 테스트 18개로 확장 | 현재 |

---

## 세부 변경 이력

### 🛠️ 기능 개선

#### v0.2 → v0.5: 핵심 기능 구현
- **무엇을**: 2안 비교 계산 API + 기본 UI
- **왜**: 먼저 작동하는 프로토타입을 만들어 계산 로직 검증
- **결과**: 사용자가 시급/선택지 입력 → 총비용 비교 결과 확인 가능

#### v0.6 → v0.8: 안정성 확보
- **무엇을**: 입력 검증, 전역 예외 처리, 테스트 11개
- **왜**: 잘못된 입력으로 인한 오류 방지, 계산 로직 정확성 보장
- **결과**: 음수/null/잘못된 JSON 모두 차단, 테스트 자동화

#### v0.9 → v1.0: 확장 기능
- **무엇을**: 다안 비교(3~5개), 히스토리, 캐싱
- **왜**: 실제 의사결정은 2개 이상 비교가 많고, 반복 계산 방지 필요
- **결과**: 사용자 경험 대폭 향상, 성능 최적화

---

### 🐛 버그 수정

#### v1.1.0: 다안 비교 프리셋 미동작
- **문제**: 다안 비교 모드에서 프리셋 버튼 클릭 시 값이 채워지지 않음
- **원인**: DOM 선택자가 동적 요소를 찾지 못함
- **해결**: data-index 속성으로 명시적 선택
- **한계**: A, B만 채워지고 C, D, E는 여전히 비어있음

#### v1.2.0: 프리셋 완전 지원
- **문제**: A, B만 채워지고 C, D, E가 비어있음
- **원인**: 프리셋 데이터 구조가 optionA/optionB만 지원
- **해결**: options 배열로 확장 (최대 5개), 반복문으로 모든 선택지 채움
- **결과**: 3~5개 선택지 모두 프리셋으로 즉시 테스트 가능

#### v1.2.1: 에러 알림 개선
- **문제**: alert()가 작동하지 않고, 하단 메시지만 표시됨
- **원인**: 브라우저 설정 또는 환경 차이
- **해결**: alert() 제거, 하단 메시지 + 자동 스크롤만 유지
- **결과**: 비침습적이면서도 명확한 에러 피드백

#### v1.3.1: 히스토리 정책 혼란
- **문제**: 서버 재시작 후에도 이전 히스토리가 남아 혼란
- **원인**: localStorage는 영구 저장
- **해결**: sessionStorage로 변경
- **결과**: 탭 닫으면 자동 삭제, 새로운 세션마다 깔끔한 시작

#### v1.8.0: 높은 시급 입력 에러 메시지
- **문제**: 매우 높은 시급(예: 10억원) 입력 시 "JSON 형식을 다시 확인해주세요" 같은 부적절한 에러
- **원인**: 백엔드 상한선 검증 없음, JavaScript만 경고
- **해결**: @Max(1억원) 추가, 프론트엔드도 상한선 체크
- **결과**: "시급은 1억원 이하로 입력해주세요" 명확한 메시지

---

### 📝 사용자 피드백 반영

#### v1.3.0: 실제 사용자 테스트 기반 개선
**피드백 1**: "계산식이 각 선택지별로 상세하게 나왔으면 좋겠다"
- **적용**: displayResult() 함수 개선, 단계별 계산 표시
- **효과**: 사용자가 계산 과정을 명확히 이해 가능

**피드백 2**: "제목이나 디자인이 좀 더 사용자에게 다가갔으면"
- **적용**: "💰 시간과 돈, 함께 계산하기" + 설명 추가
- **효과**: 첫 인상 개선, 목적 명확화

**피드백 3**: "계산 히스토리가 이전 서버의 기록이 남아 혼란"
- **적용**: localStorage → sessionStorage 변경
- **효과**: 세션마다 깔끔한 시작

**피드백 4**: "단위 혼동 (1시간 20분 = ?분)"
- **적용**: 접기/펴기 가능한 시간 변환 가이드 추가
- **효과**: 입력 시 참고 가능, 혼란 감소

---

### 📚 문서화 강화

#### v1.4.0 → v1.7.0: 체계적 문서화
- **RETROSPECTIVE.md**: 우선순위 조정, 시간 배분, 막힌 부분 해결, trade-off 분석
- **측정 지표**: 정량적 지표 6개 + 목표 vs 실제 테이블
- **AI_LOG.md**: 사용자 참여의 가치, AI vs 인간 강점, 체계적 접근
- **ARCHITECTURE.md**: 레이어 구조, 확장성, ADR, 보안/성능/모니터링

#### v1.7.1 → v1.7.7: 진정성 확보
- **목적**: 면접에서 "점수를 위한 과제"가 아닌 "실제 문제 해결"로 보이도록
- **작업**: "가산점", "평가 기준", "채점 포인트" 등 평가 중심 표현 제거
- **효과**: 문서가 더 자연스럽고 진정성 있게 변경

---

## 전체 요약

### 주요 성과
- **테스트**: 11개 → 17개 → 18개로 점진적 확장
- **문서**: 4개 핵심 문서 + ARCHITECTURE.md 신규 작성
- **사용자 피드백**: 4건 모두 반영 (계산식, 히스토리, 제목, 단위)
- **버그 수정**: 5건 (프리셋 3차, 에러 알림 2차, 히스토리, 높은 시급)

### 개선 패턴
1. **MVP 우선** → 확장 기능 추가
2. **사용자 테스트** → 피드백 즉시 반영
3. **문제 발견** → 원인 분석 → 완전 해결
4. **점진적 개선** → 테스트로 검증
